<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‹¥ç‹­ãƒˆãƒ”ãƒƒã‚¯ã‚¹ä¸€è¦§ - WAKASA!</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header class="site-header">
        <div class="logo-area">
            <h1><a href="index.html" style="text-decoration: none;"><span class="red">WAKASA</span><span class="blue">!</span></a></h1>
            <p class="subtitle">è‹¥ç‹­çœŒæœ€å¤§ç´šã®åœ°åŸŸãƒãƒ¼ã‚¿ãƒ«</p>
        </div>
        <div class="header-info">
            <div id="clock-display" class="clock">0000å¹´0æœˆ0æ—¥(æœˆ) 00:00:00</div>
        </div>
    </header>

        <div class="status-bar2">
    <span class="label2">ãƒ©ã‚¤ãƒ–å¤©æ°—äºˆå ±</span>
    <marquee scrollamount="3" class="weather-ticker" id="weather-display">
        ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ä¸­...
    </marquee>
</div>

<script>
async function updateWeather() {
    // ç·¯åº¦ãƒ»çµŒåº¦ã®è¨­å®šï¼ˆæ²¿å²¸=æ•¦è³€ä»˜è¿‘, ä¸­å¤®=å°æµœä»˜è¿‘, å—éƒ¨=èˆé¶´ä»˜è¿‘ï¼‰
    const locations = [
        { label: "æ²¿å²¸", lat: 35.64, lon: 136.06 },
        { label: "ä¸­å¤®", lat: 35.49, lon: 135.74 },
        { label: "å—éƒ¨", lat: 35.47, lon: 135.33 }
    ];

    // å¤©æ°—ã‚³ãƒ¼ãƒ‰ã‚’æ—¥æœ¬èªã«å¤‰æ›ã™ã‚‹ãƒãƒƒãƒ—
    const weatherCodes = {
        0: "æ™´ã‚Œ", 1: "æ¦‚ã­æ™´ã‚Œ", 2: "æ™‚ã€…æ›‡ã‚Š", 3: "æ›‡ã‚Š",
        45: "éœ§", 48: "éœ§", 51: "å°é›¨", 53: "é›¨", 55: "é›¨",
        61: "é›¨", 63: "é›¨", 65: "å¼·ã„é›¨", 71: "é›ª", 73: "é›ª", 75: "å¤§é›ª",
        80: "ã«ã‚ã‹é›¨", 81: "å¼·ã„ã«ã‚ã‹é›¨", 82: "æ¿€ã—ã„é›¨", 95: "é›·é›¨"
    };

    try {
        const results = await Promise.all(locations.map(async (loc) => {
            const response = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${loc.lat}&longitude=${loc.lon}&current_weather=true&timezone=Asia%2FTokyo`);
            const data = await response.json();
            const temp = Math.round(data.current_weather.temperature);
            const condition = weatherCodes[data.current_weather.weathercode] || "ä¸æ˜";
            return `[${loc.label}]${condition} ${temp}â„ƒ`;
        }));

        // å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’ marquee ã«åæ˜ 
        document.getElementById('weather-display').innerText = results.join(' / ');
    } catch (error) {
        document.getElementById('weather-display').innerText = "ãƒ‡ãƒ¼ã‚¿å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ";
        console.error("Weather API Error:", error);
    }
}

// ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«å®Ÿè¡Œ
updateWeather();
// 30åˆ†ã”ã¨ã«æ›´æ–°ï¼ˆ1800000ãƒŸãƒªç§’ï¼‰
setInterval(updateWeather, 1800000);
</script>

    <div class="status-bar">
        <span class="label">ã‚¤ãƒ³ãƒ•ãƒ©æƒ…å ±</span>
        <marquee scrollamount="5" class="ticker">
            ã€é‰„é“ã€‘çœŒå†…è·¯ç·šï¼šé€šå¸¸é‹è»¢ã€€ã€é“è·¯ã€‘ä¸‰éƒ½é«˜é€Ÿé“è·¯ï¼šå…µåºœICä»˜è¿‘ã§å·¥äº‹æ¸‹æ»ã€€ã€é›»åŠ›ã€‘çœŒå†…å…¨åŸŸï¼šå®‰å®šä¾›çµ¦ä¸­ã€€ã€è¡Œæ”¿ã€‘å…µåºœå¸‚å½¹æ‰€ï¼šæœ¬æ—¥ã¯20æ™‚ã¾ã§çª“å£å»¶é•·
        </marquee>
    </div>

    <div class="main-container">
        
        <nav class="sidebar-left">
            <div class="box-header">ä¸»è¦ã‚¨ãƒªã‚¢ï¼ˆä¸‰éƒ½ï¼‰</div>
            <ul class="link-list">
                <li><a href="./Town Pages/wakasa.html">è‹¥ç‹­å¸‚</a></li>
                <li><a href="./Town Pages/byobu.html">å…µåºœå¸‚</a></li>
                <li><a href="./Town Pages/mononobe.html">ç‰©éƒ¨å¸‚</a></li>
            </ul>

            <div class="box-header">æ²¿å²¸ã‚¨ãƒªã‚¢</div>
            <ul class="link-list">
                <li><a href="#">é¦™æ´¥æ‘</a></li>
                <li><a href="#">æ¸¡ç”º</a></li>
                <li><a href="#">æ±å´–ç”º</a></li>
                <li><a href="#">ä¼ŠèˆŸå¸‚</a></li>
                <li><a href="#">æ—©æ‰‹å·ç”º</a></li>
                <li><a href="#">çŸ¢å‚ç”º</a></li>
                <li><a href="#">æ±Ÿå´å¸‚</a></li>
                <li><a href="#">è‘‰ãŒå±±ç”º</a></li>
            </ul>

            <div class="box-header">ä¸­éƒ¨ãƒ»å—éƒ¨ã‚¨ãƒªã‚¢</div>
            <ul class="link-list">
                <li><a href="#">ç”²æ—¥å¸‚</a></li>
                <li><a href="#">æ°å·ç”º</a></li>
                <li><a href="#">å¾³å³°ç”º</a></li>
                <li><a href="#">å…¥å¡šå¸‚</a></li>
                <li><a href="#">æ·±å±±ç”º</a></li>
                <li><a href="#">æŠ˜é·²å¸‚</a></li>
                <li><a href="#">åŒ—é™µå¸‚</a></li>
                <li><a href="#">ç™½å¤®å¸‚</a></li>
                <li><a href="#">åƒé³´æ‘</a></li>
                <li><a href="#">æœæ¸•æ‘</a></li>
                <li><a href="#">ä¸¹è°·ç”º</a></li>
                <li><a href="#">å°æ¡Ÿç”°ç”º</a></li>
            </ul>
        </nav>

        <main class="content-center">
            
            <section class="news-section">
                <nav class="breadcrumb" style="margin-bottom: 10px; font-size: 0.8em;">
                    <a href="index.html">ãƒˆãƒƒãƒ—</a> &gt; ãƒ‹ãƒ¥ãƒ¼ã‚¹ä¸€è¦§
                </nav>

                <div class="news-header">
                    <h2>ä¸»è¦ãƒ‹ãƒ¥ãƒ¼ã‚¹</h2>
                </div>
                <ul class="news-list" id="list-main">
                    </ul>

                <div class="news-header" style="margin-top: 40px;">
                    <h2>åœ°åŸŸãƒˆãƒ”ãƒƒã‚¯ã‚¹</h2>
                </div>
                <ul class="news-list" id="list-local">
                    </ul>

                <div class="news-header" style="margin-top: 40px;">
                    <h2>çµŒæ¸ˆãƒ»ãƒ“ã‚¸ãƒã‚¹</h2>
                </div>
                <ul class="news-list" id="list-economy">
                    </ul>

                <div style="text-align: center; margin-top: 40px; padding: 20px; border-top: 1px solid #eee;">
                    <a href="index.html" style="color: #0044cc; text-decoration: none;">â‰ª ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã¸æˆ»ã‚‹</a>
                </div>
            </section>

            <section class="tools-section">
                <h3>â–¼ ãã‚‰ã—ã®ä¾¿åˆ©ãƒ„ãƒ¼ãƒ«</h3>
                <div class="tool-grid">
                    <div class="tool-item">
                        <a style="text-decoration: none;" href="./gomidashi.html">
                            <div class="icon">ğŸ—‘ï¸</div>
                            <div class="label">ã‚´ãƒŸå‡ºã—</div>
                        </a>
                    </div>
                    <div class="tool-item">
                        <div class="icon">ğŸ¥</div>
                        <div class="label">å½“ç•ªåŒ»</div>
                    </div>
                    <div class="tool-item">
                        <div class="icon">ğŸšŒ</div>
                        <div class="label">ãƒã‚¹ä½ç½®</div>
                    </div>
                    <div class="tool-item">
                        <div class="icon">ğŸ¥¬</div>
                        <div class="label">ç›´å£²æ‰€</div>
                    </div>
                </div>
            </section>
        </main>

        <aside class="sidebar-right">
            <div class="login-box" id="auth-box">
                <div id="logged-out-view">
                    <p>ã“ã‚“ã«ã¡ã¯ã€<b>ã‚²ã‚¹ãƒˆ</b>ã•ã‚“</p>
                    <button class="btn-primary" id="login-btn">è‹¥ç‹­IDã§ãƒ­ã‚°ã‚¤ãƒ³</button>
                    <p class="small-text"><a href="./register.html" id="signup-link">æ–°è¦ä¼šå“¡ç™»éŒ²ã¯ã“ã¡ã‚‰</a></p>
                </div>
                <div id="logged-in-view" style="display: none;">
                    <p>ã“ã‚“ã«ã¡ã¯ã€<b id="user-display-name">---</b>ã•ã‚“</p>
                    <p class="point-display">ç¾åœ¨ã®ãƒã‚¤ãƒ³ãƒˆ: <span id="user-points">0</span> pt</p>
                    <button class="btn-secondary" id="logout-btn">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
                </div>
            </div>
            <div class="mission-box" id="mission-area" style="display: none;">
                <button id="get-point-btn">ğŸ ä»Šæ—¥ã®æ¥çœŒãƒã‚¤ãƒ³ãƒˆã‚’ã‚‚ã‚‰ã†</button>
            </div>
            <span style="margin: 1px;"></span>
            <div class="ad-area">
                <div class="box-header2">åºƒå‘Šã‚¨ãƒªã‚¢</div>
                <div class="ad-banner">
                    <p>ã€æ±‚äººã€‘æµ·ãŒè¦‹ãˆã‚‹ã‚ªãƒ•ã‚£ã‚¹</p>
                    <p>è©³ç´°ã¯ã“ã¡ã‚‰ã‹ã‚‰</p>
                    <strong>æ±Ÿå´ITãƒ‘ãƒ¼ã‚¯</strong>
                </div>
                <div class="ad-banner2">
                    <a style="text-decoration: none; text-align: center; display: block; color: #595959;" href="https://fictional-railway.github.io/Ifunesan-Bus/">
                        <p>å¿ƒã«ã—ã¾ã£ãŸå¤¢ã€ã‚‚ã†ä¸€åº¦ã‹ãªãˆã¦ã¿ã¾ã›ã‚“ã‹ï¼Ÿ</p>
                        <p>ä¼ŠèˆŸå±±ãƒã‚¹ã§ã¯é‹è»¢æ‰‹ã‚’å‹Ÿé›†ã—ã¦ãŠã‚Šã¾ã™ã€‚</p>
                        <strong>ä¼ŠèˆŸå±±äº¤é€š</strong>
                    </a>
                </div>
            </div>
        </aside>

    </div>

    <footer>
        <p class="copyright">Copyright (C) 2025 WAKASA Prefecture Portal. All Rights Reserved.</p>
        <p class="disclaimer">â€»ã“ã®ã‚µã‚¤ãƒˆã¯æ¶ç©ºã®ã‚‚ã®ã§ã™ã€‚</p>
        <a style="color: rgb(87, 182, 255);" href="https://fictional-railway.github.io/myrailways/">æ¶ç©ºé‰„é“ä¸€è¦§ã¯ã“ã¡ã‚‰ã‹ã‚‰</a><br><br>
    </footer>

    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            if (typeof newsData === 'undefined') return;

            // å„ã‚«ãƒ†ã‚´ãƒªã”ã¨ã«ãƒªã‚¹ãƒˆã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•°
            const renderCategory = (categoryId, data) => {
                const container = document.getElementById(categoryId);
                if (!container) return;
                
                container.innerHTML = '';
                // æœ€å¤§20ä»¶ã‚’è¡¨ç¤º
                data.slice(0, 20).forEach(item => {
                    const li = document.createElement('li');
                    li.innerHTML = `
                        <span class="date">${item.date}</span>
                        <a href="${item.url}">${item.title}</a>
                        ${item.isNew ? '<span class="new-badge">NEW</span>' : ''}
                    `;
                    container.appendChild(li);
                });
            };

            // å®Ÿè¡Œ
            renderCategory('list-main', newsData.main);
            renderCategory('list-local', newsData.local);
            renderCategory('list-economy', newsData.economy);
        });
    </script>
</body>
</html>